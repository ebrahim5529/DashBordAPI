# نظام أسهل - لوحة تحكم إدارة السقالات
وثيقة متطلبات النظام (SRS - Software Requirements Specification)
نظام إدارة تأجير وبيع وشراء السقالات


 مقدمة
الغرض
الغرض من هذا النظام هو تصميم وبناء منصة متكاملة لإدارة عمليات تأجير، بيع، وشراء السقالات. يهدف النظام إلى تحسين كفاءة العمليات التجارية اليومية، تقليل الأخطاء البشرية، توفير واجهة سهلة الاستخدام لموظفي الإدارة والعملاء، وضمان تتبع دقيق لكل من المخزون، العقود، والمدفوعات. كما يهدف إلى تقديم تقارير وتحليلات تساعد الإدارة على اتخاذ قرارات استراتيجية مستنيرة.
مع مراعاة:
تصميم واجهة تفاعلية:
استخدام ألوان وخطوط واضحة لتسهيل قراءة البيانات.
إضافة رموز (Icons) بجانب الإجراءات (فتح العقد، طباعة الفاتورة، مدفوعات، اتصال، حذف) لتوضيح الوظائف بشكل بصري.
تحسين تصميم الجدول بحيث يدعم التصفح السريع (مثل تثبيت رأس الجدول عند التمرير).
إضافة لوحة تحكم (Dashboard):
عرض ملخص سريع للعقود (عدد العقود المفتوحة، العقود المدفوعة بالكامل، العقود غير المدفوعة).
عرض رسومات بيانية لتوضيح نسب العقود المدفوعة وغير المدفوعة.
 نطاق النظام:
النظام مصمم خصيصًا للشركات العاملة في مجال تأجير وبيع السقالات، حيث يغطي جميع الجوانب المتعلقة بإدارة العمليات اليومية والمخزون. يتضمن النظام الميزات التالية:
إدارة العقود (التأجير والبيع).
إدارة المخزون (إضافة، تتبع، وإدارة السقالات).
إدارة العملاء (إنشاء ملفات العملاء، تتبع تاريخ التعاملات).
إدارة المدفوعات والفواتير.
إصدار التقارير والتحليلات المالية والتشغيلية.
دعم البحث والتصفية للعثور على العقود والمخزون بسهولة.
التنبيهات التلقائية لتذكير المستخدمين بالمهام المهمة.
تعريف المستخدمين
مدير الشركة:
متابعة الأداء العام للشركة.
الاطلاع على التقارير المالية والتشغيلية.
اتخاذ قرارات استراتيجية بناءً على البيانات المقدمة من النظام.
موظفو المبيعات والتأجير:
إنشاء وإدارة العقود (بيع وتأجير).
متابعة حالة العقود والمدفوعات.
التواصل مع العملاء وحل المشكلات المتعلقة بالعقود.
موظفو المحاسبة:
إدارة المدفوعات والمستحقات.
إصدار الفواتير الإلكترونية.
إعداد التقارير المالية الشهرية والسنوية.
مراقبو المخزون والفنيون:
إدارة السقالات المتوفرة والمستخدمة.
تحديث حالة السقالات (متوفرة، مستأجرة، مباعة، تحت الصيانة).
متابعة حالة الصيانة للسقالات التالفة.
 الافتراضات والقيود
افتراضات:
النظام سيعمل عبر الإنترنت وسيكون متاحًا على مدار الساعة.
سيتم تدريب الموظفين على استخدام النظام لضمان الكفاءة.
البيانات الحساسة مثل بيانات العملاء والعقود ستكون مشفرة لضمان الأمان.
قيود:
النظام يتطلب اتصالاً مستقرًا بالإنترنت للوصول إلى قاعدة البيانات.
النظام يدعم اللغة العربية والإنجليزية فقط في المرحلة الأولى.
قد يتطلب تدريبًا إضافيًا للمستخدمين الجدد على بعض الميزات المتقدمة.
المتطلبات الوظيفية
 إدارة العقود
النظام يجب أن يتعامل مع نوعين رئيسيين من العقود:
عقود التأجير:
تحديد مدة الإيجار (تاريخ البدء والانتهاء).
تسجيل تفاصيل السقالات المؤجرة (النوع، الكمية، المواصفات).
حساب تكلفة الإيجار بناءً على المدة والكمية.
متابعة حالة العقد (نشط، منتهي، متأخر).1. إدارة العقود:

يجب أن يتعامل النظام مع نوعين رئيسيين من العقود مع أتمتة متقدمة:
عقود التأجير:
تحديد مدة الإيجار: تحديد تاريخ البدء والانتهاء بدقة، مع إمكانية التعديل وتمديد المدة بناءً على طلب العميل وموافقة الإدارة.
تسجيل تفاصيل السقالات المؤجرة: تسجيل شامل لنوع السقالات، الكمية، والمواصفات الفنية لكل قطعة (مثل رقم تعريف فريد لكل قطعة لضمان التتبع الدقيق).
حساب تكلفة الإيجار: حساب تلقائي للتكلفة بناءً على مدة الإيجار، الكمية، ونوع السقالات، مع إمكانية تطبيق خصومات أو رسوم إضافية (مثل رسوم التوصيل أو التركيب).
متابعة حالة العقد: متابعة فورية لحالة العقد (نشط، منتهي، متأخر، معلق)، مع إرسال تنبيهات تلقائية للعملاء والموظفين قبل انتهاء العقد أو عند استحقاق الدفعات.
أتمتة العملية:
الموافقة والإرسال التلقائي: بمجرد اعتماد المدير للعقد، يتم إرسال طلب السقالات تلقائيًا إلى فريق التشغيل (عبر النظام أو البريد الإلكتروني أو رسالة نصية) يتضمن تفاصيل العقد، كمية السقالات المطلوبة، وموقع التسليم.
تحديث المخزون التلقائي: يتم خصم السقالات المؤجرة تلقائيًا من المخزون فور اعتماد العقد لضمان دقة بيانات التوفر.
إشعارات لفريق التشغيل: تفعيل إشعارات فورية لفريق التشغيل بمجرد الموافقة على عقد التأجير، مع تفاصيل شاملة حول العقد (نوع السقالات، الكمية، تاريخ البدء، موقع التسليم).
متابعة التسليم والاستلام: توفير واجهة لفريق التشغيل لتحديث حالة التسليم والاستلام للسقالات، مما يعكس الحالة في النظام بشكل مباشر (تم التسليم، تم الاستلام).
عقود البيع:
تسجيل تفاصيل السقالات المباعة: تسجيل دقيق لنوع وكمية السقالات المباعة، مع أي مواصفات إضافية.
حساب إجمالي قيمة العقد: حساب تلقائي للقيمة الإجمالية للعقد مع الأخذ في الاعتبار أي ضرائب أو خصومات.
تحديث المخزون بعد البيع: خصم تلقائي لكمية السقالات المباعة من المخزون فور إتمام عملية البيع.
أتمتة العملية:
إرسال طلب الشحن: فور اعتماد عقد البيع، يتم إرسال طلب شحن تلقائي إلى المستودع أو فريق التوصيل، يتضمن تفاصيل السقالات المباعة وعنوان التسليم.
توليد الفاتورة تلقائيًا: يتم إنشاء فاتورة البيع تلقائيًا وإرسالها للعميل عبر البريد الإلكتروني.
إجراءات على العقود (مع تعزيز الأتمتة):
إنشاء عقد جديد: واجهة سهلة الاستخدام لإنشاء العقود، مع حقول إدخال ذكية وتدقيق للبيانات لمنع الأخطاء.
تعديل تفاصيل العقد: إمكانية تعديل العقود النشطة، مع تسجيل سجل التعديلات ومن قام بها لضمان الشفافية.
حذف العقود (مع تسجيل السبب): توفير صلاحيات خاصة لحذف العقود، مع إلزام بتسجيل سبب الحذف وتوثيقه.
طباعة العقود بصيغة PDF أو إرسالها عبر البريد الإلكتروني: إمكانية توليد وطباعة العقود بصيغة PDF عالية الجودة، أو إرسالها مباشرة إلى العميل عبر البريد الإلكتروني من داخل النظام.
أتمتة التذكيرات والمتابعات: إرسال تذكيرات آلية بالبريد الإلكتروني أو رسائل نصية للعملاء بخصوص مواعيد الدفع، انتهاء العقود، أو الحاجة لتجديد الإيجار.
لوحة تحكم تفاعلية للعقود: عرض مرئي لحالة العقود (عدد العقود النشطة، المنتهية، المتأخرة، العقود الجديدة) في لوحة التحكم الرئيسية، مع رسوم بيانية توضيحية.
عقود البيع:
تسجيل تفاصيل السقالات المباعة (النوع، الكمية).
حساب إجمالي قيمة العقد.
تحديث المخزون بعد البيع.
إجراءات على العقود:
إنشاء عقد جديد.
تعديل تفاصيل العقد.
حذف العقود (مع تسجيل السبب).
طباعة العقود بصيغة PDF أو إرسالها عبر البريد الإلكتروني.

 إدارة المخزون: النظام يجب أن يوفر إدارة شاملة للمخزون، بما في ذلك:
إضافة السقالات الجديدة:
إدخال تفاصيل السقالات (النوع، الحجم، المادة، الحالة: جديد/مستعمل).
إدخال الكمية المتوفرة.
تحديث حالة المخزون:
خصم الكمية عند التأجير أو البيع.
إعادة الكمية عند انتهاء الإيجار.
وضع السقالات تحت الصيانة عند الحاجة.
تتبع حالة السقالات:
عرض السقالات المتوفرة، المستأجرة، والمباعة.
إرسال تنبيهات عند انخفاض المخزون عن مستوى معين.
 إدارة العملاء:
إنشاء ملف لكل عميل يحتوي على:
الاسم الكامل.
رقم الهوية أو السجل التجاري.
رقم الهاتف والبريد الإلكتروني.
سجل العقود السابقة.
سجل المدفوعات والمستحقات.
إجراءات على العملاء:
إضافة عملاء جدد.
تعديل بيانات العملاء.
حذف العملاء (مع تسجيل السبب).
 إدارة المدفوعات
تسجيل المدفوعات لكل عقد (جزئية أو كاملة).
إصدار إيصالات إلكترونية لكل عملية دفع.
عرض حالة المدفوعات لكل عقد (مدفوع بالكامل، مدفوع جزئيًا، غير مدفوع).
إرسال تذكيرات تلقائية للعملاء بخصوص المدفوعات المستحقة.
إصدار الفواتير والتقارير
الفواتير:
إنشاء فواتير مخصصة لكل عقد.
تضمين تفاصيل العقد والمدفوعات في الفاتورة.
دعم تصدير الفواتير بصيغ PDF وExcel.
التقارير:
تقارير الإيرادات الشهرية والسنوية.
تقارير المخزون (المتوفر، المستأجر، المبيع).
تقارير العملاء (الأكثر تعاملاً، العملاء المتأخرين).
تقارير أداء الشركة (الإيرادات، العقود الجديدة).
 البحث والتصفية
بحث متقدم:
البحث باستخدام اسم العميل، رقم العقد، نوع العقد (بيع/تأجير)، أو تاريخ العقد
البحث في جميع الحقول المتعلقة بالمخزون والعملاء.
التصفية:
تصفية العقود حسب الحالة (نشط، منتهي، متأخر).
تصفية السقالات حسب النوع، الحالة (جديد/مستعمل)، أو الكمية المتوفرة.
 التنبيهات التلقائية: إرسال إشعارات عند:
اقتراب انتهاء مدة الإيجار.
استحقاق المدفوعات.
انخفاض المخزون عن الحد الأدنى المحدد.
وجود سقالات تحتاج إلى صيانة.
 إدارة المستخدمين والصلاحيات
إنشاء حسابات للمستخدمين:
تحديد صلاحيات كل مستخدم (إدارة العقود، المخزون، المدفوعات).
تسجيل الدخول باستخدام اسم مستخدم وكلمة مرور قوية.
تسجيل الأنشطة:
تسجيل كافة الأنشطة في النظام (إنشاء العقود، تعديلها، حذفها).
عرض سجل الأنشطة للإدارة.
 المتطلبات غير الوظيفية
 الأداء
يجب أن يستجيب النظام خلال أقل من 2 ثانية عند تحميل البيانات.
دعم ما يصل إلى 10,000 عقد و50,000 قطعة سقالات في قاعدة البيانات.
 الأمان
تشفير جميع البيانات الحساسة باستخدام بروتوكولات SSL/TLS.
تسجيل الدخول الآمن باستخدام المصادقة الثنائية (2FA).
حفظ نسخ احتياطية للبيانات بشكل دوري.
 سهولة الاستخدام
تصميم واجهة مستخدم بسيطة وسهلة الاستخدام تدعم اللغة العربية والإنجليزية.
دعم الأجهزة المكتبية والمحمولة.
 إضافات عميقة لتطوير النظام
الذكاء الاصطناعي وتحليل البيانات
توقع الطلب المستقبلي على السقالات بناءً على الأنماط السابقة.
تقديم توصيات لتحسين المخزون وتقليل التكاليف.
تحليل أداء العملاء وتقديم عروض مخصصة.
 دعم الدفع الإلكتروني
دمج بوابات دفع إلكترونية مثل PayPal وStripe.
إصدار إيصالات تلقائية عند إتمام الدفع.
 إدارة الصيانة
تسجيل السقالات التي تحتاج إلى صيانة.
تتبع حالة الصيانة وتكلفتها.
جدولة الصيانة الدورية للسقالات.
 تتبع الأصول
تتبع العمر الافتراضي للسقالات.
حساب قيمة الأصول المتبقية (Depreciation).
تكامل مع أنظمة أخرى
تكامل مع أنظمة المحاسبة مثل QuickBooks.
تكامل مع أنظمة إدارة المشاريع إذا كانت السقالات مرتبطة بمشاريع معينة.
قيود النظام
النظام يعتمد على اتصال مستقر بالإنترنت.
قد يتطلب تدريبًا بسيطًا للمستخدمين الجدد.
 تحسينات مستقبلية
تطوير تطبيق جوال لإدارة العقود والمخزون.
دعم لغات إضافية مثل الفرنسية.
إضافة ميزة متابعة المشاريع المرتبطة بالسقالات.


الخلاصة
هذا النظام يوفر حلولًا شاملة لإدارة عمليات تأجير، بيع، وشراء السقالات. الإضافات المقترحة مثل الذكاء الاصطناعي، إدارة الصيانة، والتكامل مع الأنظمة الأخرى ستعزز من كفاءة العمليات اليومية وتزيد من رضا العملاء.


نظام إدارة شامل لتأجير وبيع السقالات مبني باستخدام Next.js 14 مع TypeScript و Prisma و SQLite.

## 🏗️ هيكل المشروع

### 📁 src/app/ (Routes)
```
app/
├── layout.tsx              # Layout الرئيسي
├── page.tsx                # الصفحة الرئيسية
├── globals.css             # الأنماط العامة
├── dashboard/              # مسار لوحة التحكم
│   ├── page.tsx           # صفحة لوحة التحكم
│   ├── layout.tsx         # Layout خاص بلوحة التحكم
│   ├── loading.tsx        # صفحة التحميل
│   ├── error.tsx          # صفحة الخطأ
│   ├── not-found.tsx      # صفحة 404
│   ├── _components/       # مكونات خاصة بالمسار
│   ├── _actions/          # Server Actions
│   ├── _hooks/            # Custom Hooks
│   └── _utils/            # دوال مساعدة
└── [other-routes]/        # مسارات أخرى
```

### 📁 src/components/ (المكونات)
```
components/
├── shared/                # مكونات مشتركة
│   ├── Button.tsx
│   └── Card.tsx
├── features/              # مكونات مرتبطة بميزة معينة
│   └── UserForm.tsx
├── layout/                # مكونات التصميم العام
│   ├── Navbar.tsx
│   ├── Header.tsx
│   └── Sidebar.tsx
├── providers/             # مزودي الحالة
│   ├── index.tsx
│   ├── theme.provider.tsx
│   ├── auth.provider.tsx
│   └── store.provider.tsx
├── skeletons/             # مكونات التحميل
│   ├── CardSkeleton.tsx
│   └── TableSkeleton.tsx
└── ui/                    # مكونات UI
    ├── button.tsx
    └── card.tsx
```

### 📁 src/lib/ (المكتبة والأدوات)
```
lib/
├── constants/             # ثوابت عامة
│   └── api.constant.ts
├── schemas/               # مخططات Zod
│   ├── user.schema.ts
│   ├── contract.schema.ts
│   ├── payment.schema.ts
│   └── index.ts
├── services/              # خدمات قاعدة البيانات
│   ├── user.service.ts
│   ├── contract.service.ts
│   ├── payment.service.ts
│   └── index.ts
├── types/                 # تعريف أنواع TypeScript
│   └── user.d.ts
├── utils/                 # دوال عامة
│   ├── utils.ts
│   └── formatDate.util.ts
└── prisma.ts             # إعداد Prisma Client
```

### 📁 prisma/ (قاعدة البيانات)
```
prisma/
├── schema.prisma         # مخطط قاعدة البيانات
└── seed.ts              # ملء البيانات التجريبية
```

## 🚀 الميزات

### قاعدة البيانات
- **Prisma ORM**: لإدارة قاعدة البيانات
- **SQLite**: قاعدة بيانات خفيفة وسهلة الاستخدام
- **بيانات حقيقية**: بدلاً من البيانات الوهمية
- **العلاقات**: علاقات صحيحة بين الجداول
- **التحقق**: Zod schemas للتحقق من البيانات

### Server Components vs Client Components
- **Server Components**: تعمل على الخادم، مناسبة لجلب البيانات وعرض المحتوى الثابت
- **Client Components**: تعمل في المتصفح، مناسبة للتفاعل والـ Hooks

### إدارة الحالة
- **Zustand**: لإدارة الحالة العامة
- **React Hook Form**: لإدارة النماذج
- **Zod**: للتحقق من صحة البيانات

### التصميم
- **Tailwind CSS**: للأنماط
- **Class Variance Authority**: لإدارة أنواع المكونات
- **Lucide React**: للأيقونات

## 📦 المكتبات المطلوبة

```bash
# المكتبات الأساسية
npm install react-hook-form @hookform/resolvers zod @tanstack/react-table zustand

# مكتبات قاعدة البيانات
npm install @prisma/client
npm install -D prisma tsx
```

## 🛠️ الاستخدام

### 1. إعداد قاعدة البيانات
```bash
# إنشاء ملف .env
DATABASE_URL="file:./dev.db"

# إنشاء قاعدة البيانات
npm run db:push

# ملء البيانات التجريبية
npm run db:seed
```

### 2. Server Components مع قاعدة البيانات
```tsx
// app/dashboard/page.tsx
import { InstallmentService } from '@/lib/services'

export default async function DashboardPage() {
  const overduePayments = await InstallmentService.getOverdueInstallments()
  
  return (
    <div>
      <h1>لوحة التحكم</h1>
      <p>عدد المدفوعات المتأخرة: {overduePayments.length}</p>
    </div>
  )
}
```

### 3. Client Components
```tsx
'use client'

import { useState } from 'react'

export function InteractiveComponent() {
  const [count, setCount] = useState(0)
  
  return (
    <button onClick={() => setCount(count + 1)}>
      العدد: {count}
    </button>
  )
}
```

### 4. النماذج مع React Hook Form و Zod
```tsx
'use client'

import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { userSchema } from '@/lib/schemas/user.schema'

export function UserForm() {
  const { register, handleSubmit, formState: { errors } } = useForm({
    resolver: zodResolver(userSchema)
  })

  const onSubmit = (data) => {
    console.log(data)
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input {...register('name')} />
      {errors.name && <span>{errors.name.message}</span>}
      <button type="submit">إرسال</button>
    </form>
  )
}
```

### 5. إدارة الحالة مع Zustand
```tsx
'use client'

import { useAppStore } from '@/components/providers/store.provider'

export function Component() {
  const { sidebarOpen, setSidebarOpen } = useAppStore()
  
  return (
    <button onClick={() => setSidebarOpen(!sidebarOpen)}>
      تبديل الشريط الجانبي
    </button>
  )
}
```

## 🎨 التخصيص

### الألوان والثيمات
- دعم الوضع المظلم/الفاتح
- ألوان قابلة للتخصيص
- تصميم متجاوب

### المكونات
- مكونات قابلة لإعادة الاستخدام
- أنواع متعددة لكل مكون
- دعم التخصيص الكامل

## 📱 الاستجابة
- تصميم متجاوب لجميع الأجهزة
- دعم الشاشات الصغيرة والكبيرة
- تجربة مستخدم محسنة

## 🔧 التطوير

```bash
# تثبيت التبعيات
npm install

# إعداد قاعدة البيانات
npm run db:push
npm run db:seed

# تشغيل خادم التطوير
npm run dev

# بناء المشروع
npm run build

# تشغيل الإنتاج
npm start

# أوامر قاعدة البيانات
npm run db:studio    # فتح واجهة قاعدة البيانات
npm run db:generate  # إنشاء Prisma Client
npm run db:migrate   # إنشاء مايجريشن جديد
```

## 📝 الملاحظات

- جميع المكونات مكتوبة بـ TypeScript
- استخدام أفضل الممارسات في React و Next.js
- قاعدة بيانات حقيقية مع Prisma و SQLite
- كود منظم وقابل للصيانة
- دعم كامل للغة العربية
- تصميم احترافي وحديث
- بيانات تجريبية جاهزة للاختبار

## 📚 الوثائق الإضافية

- [دليل إعداد Prisma](./PRISMA_SETUP.md) - تعليمات مفصلة لإعداد قاعدة البيانات

## 🤝 المساهمة

1. Fork المشروع
2. إنشاء فرع للميزة الجديدة
3. Commit التغييرات
4. Push للفرع
5. إنشاء Pull Request

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT.
